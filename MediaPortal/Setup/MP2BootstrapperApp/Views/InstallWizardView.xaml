<Window x:Class="MP2BootstrapperApp.Views.InstallWizardView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:view="clr-namespace:MP2BootstrapperApp.Views"
        xmlns:viewModels="clr-namespace:MP2BootstrapperApp.ViewModels"
        mc:Ignorable="d"
        Title="Mediaportal" Height="638.045" Width="1020.739" ResizeMode="NoResize" WindowStyle="None" WindowStartupLocation="CenterScreen" UseLayoutRounding="False"
>
  <Window.Effect>
    <DropShadowEffect ShadowDepth="0" BlurRadius="25"/>
  </Window.Effect>
  <Window.Foreground>
    <SolidColorBrush Color="Black"/>
  </Window.Foreground>
  <Window.Background>
    <SolidColorBrush Color="#FF0E0E0E"/>
  </Window.Background>
  <Window.Resources>

    <DataTemplate DataType="{x:Type viewModels:InstallWelcomePageViewModel}">
      <view:InstallExistTypePageView />
    </DataTemplate>
    
    <DataTemplate DataType="{x:Type viewModels:InstallExistTypePageViewModel}">
      <view:InstallExistTypePageView />
    </DataTemplate>
    
    <DataTemplate DataType="{x:Type viewModels:InstallNewTypePageViewModel}">
      <view:InstallNewTypePageView />
    </DataTemplate>

    <DataTemplate DataType="{x:Type viewModels:InstallOverviewPageViewModel}">
      <view:InstallOverviewPageView />
    </DataTemplate>

    <DataTemplate DataType="{x:Type viewModels:InstallFinishPageViewModel}">
      <view:InstallFinishPageView />
    </DataTemplate>

    <!-- Our style for the ToggleButton -->
    <Style x:Key="ToggleButtonWindowClose" TargetType="{x:Type ToggleButton}">
      <!-- Here you can set the initial properties for the control -->
      <Setter Property="Background" Value="Transparent" />
      <Setter Property="SnapsToDevicePixels" Value="True" />

      <!-- Template needs to completely re-writing the standard control -->
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type ToggleButton}">
            <Grid>
              <!-- Then responsible for the content. In our case it did not really need, because it is set Path -->
              <ContentPresenter x:Name="MyContentPresenter" Content="{TemplateBinding Content}" HorizontalAlignment="Center" VerticalAlignment="Center" />
              <!-- Our Path. Shows a cross -->
              <Path x:Name="CloseWindow" SnapsToDevicePixels="True" ToolTip="Close window" Width="12" Height="12" Margin="0,0,10,0" HorizontalAlignment="Right" VerticalAlignment="Center" Stretch="Fill" Fill="#FF919191" Data="F1 M 26.9166,22.1667L 37.9999,33.25L 49.0832,22.1668L 53.8332,26.9168L 42.7499,38L 53.8332,49.0834L 49.0833,53.8334L 37.9999,42.75L 26.9166,53.8334L 22.1666,49.0833L 33.25,38L 22.1667,26.9167L 26.9166,22.1667 Z " />
            </Grid>
            <!-- Trigger fires on the property -->
            <ControlTemplate.Triggers>
              <!-- Here change the color when the mouse cursor -->
              <Trigger Property="IsMouseOver" Value="True">
                <Setter TargetName="CloseWindow" Property="Fill" Value="#C10000" />
              </Trigger>

              <!-- Use ToggleButton, because it has a property IsChecked, accessible through the style -->
              <Trigger Property="IsChecked" Value="True">

              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>

    <Style TargetType="{x:Type Button}">
      <Setter Property="Background" Value="Transparent"/>
      <Setter Property="Opacity" Value="0.5"/>
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="{x:Type Button}">
            <Border Background="{TemplateBinding Background}" BorderBrush="Black" BorderThickness="0">
              <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
            </Border>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
      <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
          <Setter Property="Background" Value="Transparent"/>
          <Setter Property="Opacity" Value="1.0"/>
        </Trigger>
      </Style.Triggers>
    </Style>

    <VisualBrush x:Key="Background">
      <VisualBrush.Visual>
        <Grid>
          <Image Source="..\resources\background.jpg" Stretch="Fill">
            <Image.Effect>
              <BlurEffect Radius="30"/>
            </Image.Effect>
            <Image.OpacityMask>
              <SolidColorBrush Color="Black" Opacity="0.155"/>
            </Image.OpacityMask>
          </Image>
        </Grid>
      </VisualBrush.Visual>
    </VisualBrush>

    <VisualBrush x:Key="Banner">
      <VisualBrush.Visual>
        <Grid>
          <Image Source="..\resources\banner.png" Stretch="Fill">
          </Image>
        </Grid>
      </VisualBrush.Visual>
    </VisualBrush>

  </Window.Resources>
  <Grid Background="{StaticResource Background}">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
      <RowDefinition Height="160"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <Grid Grid.Row="0" Grid.Column="0" Background="{StaticResource Banner}">
      <ToggleButton HorizontalAlignment="Right" VerticalAlignment="Top" Height="30" Width="30" Margin="30" Name="CloseButton"
                    Style="{StaticResource ToggleButtonWindowClose}" BorderBrush="White" Foreground="White" />
    </Grid>

    <HeaderedContentControl Grid.Column="0" Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Margin="40" Content="{Binding Path=CurrentPage}" Header="{Binding Path=Header}"/>

    <Grid Grid.Column="0" Grid.Row="2">
      <Grid.ColumnDefinitions>
        <ColumnDefinition SharedSizeGroup="Buttons" />
        <ColumnDefinition SharedSizeGroup="Buttons" />
        <ColumnDefinition SharedSizeGroup="Buttons" />
      </Grid.ColumnDefinitions>
      <Button Grid.Row="0" Grid.Column="0" x:Name="Back" IsEnabled="True" Command="{Binding Path=BackCommand}"
              HorizontalAlignment="Center" HorizontalContentAlignment="Center" VerticalAlignment="Bottom"
              Width="25" Height="25">
        <StackPanel Height="25" Width="25">
          <Image Source="..\resources\button_back.png" Stretch="Fill" Width="25" Height="25" />
        </StackPanel>
      </Button>
      <Button Grid.Row="0" Grid.Column="1" x:Name="Next" IsEnabled="True" Command="{Binding Path=NextCommand}"
              HorizontalAlignment="Center" HorizontalContentAlignment="Center" VerticalAlignment="Bottom"
              Width="25" Height="25">
        <StackPanel Height="25" Width="25">
          <Image Source="..\resources\button_next.png" Stretch="Fill" Width="25" Height="25"
                 HorizontalAlignment="Left" />
        </StackPanel>
      </Button>
      <Button Grid.Row="0" Grid.Column="2" x:Name="Cancel" Command="{Binding Path=CancelCommand}"
              HorizontalAlignment="Center" HorizontalContentAlignment="Center" VerticalAlignment="Bottom"
              Width="25" Height="25">
        <StackPanel Height="25" Width="25">
          <Image Source="..\resources\button_cancel.png" Stretch="Fill" Width="25" Height="25"
                 RenderTransformOrigin="0.6,3.24" />
        </StackPanel>
      </Button>
    </Grid>

    <ProgressBar Grid.Column="0" Grid.Row="3" HorizontalAlignment="Left" Height="5"  VerticalAlignment="Bottom" Width="1023" Foreground="#FFE8641B" Minimum="0" Value="{Binding Path=Progress}" BorderThickness="0"/>
    <Grid Grid.Column="0" Grid.Row="4">
      <Rectangle HorizontalAlignment="Left" Height="130.538" Stroke="Black" VerticalAlignment="Top"
                 Width="1020.739" StrokeThickness="0">
        <Rectangle.Fill>
          <SolidColorBrush Color="Black" Opacity="0.6" />
        </Rectangle.Fill>
        <Rectangle.Effect>
          <DropShadowEffect Opacity="0.57" Direction="482" BlurRadius="8" />
        </Rectangle.Effect>
      </Rectangle>

      <TextBlock TextAlignment="Center" HorizontalAlignment="Center" Height="110.559" TextWrapping="Wrap"
                 VerticalAlignment="Bottom" Width="1000.739" Foreground="#FF919191" FontStretch="SemiCondensed"
                 FontSize="14">
        <Run Text="MediaPortal is a free open source mediacenter software" /><LineBreak /><LineBreak />
        <Run Text="You may use, distribute and copy MediaPortal under the terms of" />
        <Run FontFamily="Arial" Text=" " />
        <Run Text="GNU General Public License version 3, which is displayed below." /><LineBreak />
        <Span TextDecorations="Underline">
          <Span.Foreground>
            <SolidColorBrush Color="#FF006493" />
          </Span.Foreground>
          <Run Text="GNU GENERAL PUBLIC LICENSE" />
        </Span>
        <LineBreak />
        <Span>
          <Run Text="Version 3, 29 June 2007" />
        </Span>
      </TextBlock>
    </Grid>
  </Grid>
</Window>

